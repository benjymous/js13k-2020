<body style=background:#000><svg id="c" viewBox="0 0 640 640" style="top:0;left:0;height:100%;width:100%"><style>.heavy{font:700 20px sans-serif}</style><clipPath id="clip"><path d="M0 0h640v640H0z"/></clipPath><filter id="g" filterUnits="userSpaceOnUse"><feGaussianBlur in="SourceGraphic" stdDeviation="1.5" result="z1" /><feGaussianBlur in="SourceGraphic" stdDeviation="2" result="z2" /><feGaussianBlur in="SourceGraphic" stdDeviation="8" result="z3" /><feMerge><feMergeNode in="z1" /><feMergeNode in="z2" /><feMergeNode in="z3" /></feMerge></filter><filter id="f1" filterUnits="userSpaceOnUse"><feGaussianBlur in="SourceGraphic" stdDeviation="1" /></filter><filter id="f3" filterUnits="userSpaceOnUse"><feGaussianBlur in="SourceGraphic" stdDeviation="3" /></filter><filter id="f10" filterUnits="userSpaceOnUse"><feGaussianBlur in="SourceGraphic" stdDeviation="10" /></filter><g id="game" clip-path="url(#clip)"><g filter="url(#f3)" id="l0">&nbsp;</g><g filter="url(#g)" id="l1"><path id="ship" d="M0 0" stroke-width=".2" stroke="#fff" fill-opacity="0" /></g></g><g filter="url(#g)" id="map"><path id="galaxy" filter="url(#f3)" fill="#fff2" transform="scale(4) translate(-5 0)" d="m0 89c0-39.4 31.6-77 74-77 33.8.0 61 23.2 61 58 0 20.8-16.2 44-41 44-22 0-34-14-34-31-3.6.0-6 6-6 12 0 16.6 19.8 34 43 34 30.4.0 62-27.8 62-69 0-25.6-12.4-47-23-60 13 11 32 32.8 32 67 0 39.4-31.6 77-74 77-33.8.0-61-23.2-61-58 0-20.8 16.2-44 41-44 22 0 34 14 34 31 3.6.0 6-6 6-12 0-16.6-19.8-34-43-34C40.6 27 9 54.8 9 96c0 25.6 12.4 47 23 60-13-11-32-32.8-32-67z" /></g><text filter="url(#f1)" id="bottomtext" x="10" y="630" fill="#ff0" class="heavy"/><g style="visibility:hidden"><path id="star" d="M-2-2h2v2h-2z" /><path id="box" d="M-10-10h20v20h-20z" fill-opacity="0" /><path id="ground" d="M0 0" stroke-width=".6" stroke="#fff" fill-opacity="0" /></g></svg><script>SimplexNoise=function(t){null==t&&(t=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];for(var r=0;r<256;r++)this.p[r]=Math.floor(256*t.random());this.perm=[];for(r=0;r<512;r++)this.perm[r]=this.p[255&r]};SimplexNoise.prototype.dot=function(t,r,i){return t[0]*r+t[1]*i},SimplexNoise.prototype.noise=function(t,r){var i,h,o=(t+r)*(.5*(Math.sqrt(3)-1)),s=Math.floor(t+o),e=Math.floor(r+o),p=(3-Math.sqrt(3))/6,a=(s+e)*p,m=t-(s-a),n=r-(e-a);m>n?(i=1,h=0):(i=0,h=1);var d=m-i+p,f=n-h+p,l=m-1+2*p,u=n-1+2*p,M=255&s,g=255&e,v=this.perm[M+this.perm[g]]%12,c=this.perm[M+i+this.perm[g+h]]%12,x=this.perm[M+1+this.perm[g+1]]%12,N=.5-m*m-n*n,S=.5-d*d-f*f,q=.5-l*l-u*u;return 70*((N<0?0:(N*=N)*N*this.dot(this.grad3[v],m,n))+(S<0?0:(S*=S)*S*this.dot(this.grad3[c],d,f))+(q<0?0:(q*=q)*q*this.dot(this.grad3[x],l,u)))};simp=new SimplexNoise();clamp=(i,n,x)=>i<n?n:i>x?x:i;update=o=>o.setAttribute("transform","translate("+o.d.x+" "+o.d.y+") rotate("+o.d.r+") scale("+o.d.z+")");show=o=>o.removeAttribute("style");hide=o=>o.setAttribute("style","visibility:hidden");showmap=_=>{mapshown=true;hide(game);show(map)};showgame=_=>{mapshown=false;show(game);hide(map);bottomtext.textContent=""};cols=["#f00","#f70","#ff0","#7f0","#0f0","#0f7","#0ff","#07f","#00f","#70f","#f0f","#f07"];targets=[];missiles=[];shipcell=null;objects=[];mousedown=false;shipx=10+Math.floor(Math.random()*12);shipy=10+Math.floor(Math.random()*12);fuel=100;warpdistance=0;bottomtext.textContent="Galaxy Map Active";sqr=x=>x*x;calcfuel=d=>sqr(Math.abs(d.x-shipx))+sqr(Math.abs(d.y-shipy));for(y=0;y<32;++y){for(x=0;x<32;++x){o=box.cloneNode();o.d={x:x,y:y};if(x==shipx&&y==shipy){o.setAttribute("stroke","#ff0");shipcell=o}else{o.setAttribute("stroke","#fff2")};o.removeAttribute("id");o.setAttribute("transform","translate("+((x*20)+10)+" "+((y*20)+10)+")");o.onmouseenter=_=>{fuelneed=calcfuel(_.target.d);bottomtext.textContent="Warp requires "+fuelneed+"mgb.  Fuel available: "+fuel+"mgb";if(fuelneed<=fuel){_.target.setAttribute("stroke","#fff")}else{_.target.setAttribute("stroke","#f00")}};o.onmouseleave=_=>{if(_.target.d.x==shipx&&_.target.d.y==shipy){_.target.setAttribute("stroke","#ff0")}else{_.target.setAttribute("stroke","#fff2")}};o.onclick=_=>{fuelneed=calcfuel(_.target.d);if(fuelneed<=fuel){fuel-=fuelneed;warpdistance=fuelneed*100;shipx=_.target.d.x;shipy=_.target.d.y;_.target.setAttribute("stroke","#ff0");shipcell.setAttribute("stroke","#fff2");shipcell=_.target;showgame()}};map.appendChild(o)}};for(i=0;i<8;++i){o=box.cloneNode();o.setAttribute("stroke","#fff");o.setAttribute("stroke-width","0.3");o.removeAttribute("id");o.d={r:90,x:-200,y:-200,z:1,t:null};o.d.onUpdate=(o,g)=>{if(mousedown){if(o.d.t){o.d.x=o.d.t.x;o.d.y=o.d.t.y;o.d.r=(0+o.d.r)/2;o.d.z=(4+o.d.z)/2}}else{if(o.d.t!=null){if(missiles.length>0){m=missiles.pop();m.d.x=ship.d.x;m.d.y=ship.d.y;m.d.t=o.d.t;objects.push(m)};o.d.t=null;o.d.x=-100;o.d.y=-100;targets.push(o)}};update(o)};targets.push(o);update(o);l1.insertBefore(o,ship)};for(i=0;i<8;++i){o=box.cloneNode();o.setAttribute("stroke","#fff");o.setAttribute("stroke-width","2");o.removeAttribute("id");o.d={r:0,x:-200,y:-200,z:1,t:null};o.d.onUpdate=(o,g)=>{if(o.d.t){o.d.x=(o.d.x*0.7)+(o.d.t.x*0.3);o.d.y=(o.d.y*0.7)+(o.d.t.y*0.3);o.d.z=o.d.z*0.95;if((Math.abs(o.d.x-o.d.t.x)+Math.abs(o.d.y-o.d.t.y))<10){console.log("boom");o.d.t.dead=true;o.d.t=null;o.d.x=-200;o.d.y=-200;o.d.z=1;missiles.push(o)}};update(o)};missiles.push(o);update(o);l1.insertBefore(o,ship)};s=0.1;for(i=0;i<10;++i){o=box.cloneNode();o.setAttribute("stroke",cols[i%cols.length]);o.removeAttribute("id");o.onpointerenter=_=>{if(mousedown){if(targets.length>0){t=targets.pop();t.d.t=_.target.d;t.d.z=100;objects.push(t)}}};o.d={r:0,x:Math.random()*640,ry:Math.random()*640,s:s+=0.0005,z:1};o.d.onUpdate=(o,g)=>{o.d.r+=o.d.s/o.d.z;o.d.x=(o.d.x*(1-o.d.s))+(g.x*o.d.s);o.d.ry=(o.d.ry*(1-o.d.s))+(g.y*o.d.s);o.d.z=2.0+Math.sin(n-(o.d.s*100));if(!o.d.dead){o.d.y=250-o.d.ry+gh*(o.d.z*2);g.x=o.d.x;g.y=o.d.ry}else{o.d.y=-100};update(o)};objects.push(o);l1.insertBefore(o,l1.firstChild)};slices=20;div=10;for(i=0;i<slices;++i){o=ground.cloneNode();o.removeAttribute("id");o.d={i:i+2};o.d.onUpdate=(o,g)=>{str="";for(x=0;x<=64;++x){rx=((32-x)*((slices+1-o.d.i)/10))/div;h=g.s.noise(g.gx+rx,(o.d.i+g.gy)/div);sq=o.d.i*o.d.i;str+=x==0?"M":"L";str+=`${x*10} ${(100-(gh*3))+((gh/slices)*sq)+(h*sq/2)}`};o.setAttribute("d",str);l1.insertBefore(o,ship)};objects.push(o)};mapshown=false;warpdistance=10000;focus=true;window.onfocus=_=>focus=true;window.onblur=_=>focus=false;n=0;ship.d={r:0,x:320,y:550,z:10};ship.d.onUpdate=(o,g)=>{xp=320+(mx*320);yp=400+(my*100);o.d.x=(o.d.x*0.8+xp*0.2);o.d.y=(o.d.y*0.8+yp*0.2);gh=27.5-(my*12.5);gx-=((o.d.x-320)/3000);nosex=(320-o.d.x)/100;nosey=(o.d.y-400)/50;ship.setAttribute("d",`M${nosex} ${nosey} L-5 4 L0 8 L5 4 Z M-5 4 L0 1 L5 4`);update(o)};objects.push(ship);update(ship);showgame();c.onpointerdown=_=>{if(!mapshown){mousedown=true}};c.onpointerup=_=>{if(!mapshown){mousedown=false}};mx=0;my=0;rect=c.getBoundingClientRect();window.onresize=_=>{rect=c.getBoundingClientRect()};c.onmousemove=_=>{size=Math.min(rect.width,rect.height)/2;mx=clamp(((_.clientX-rect.left)-(rect.width/2))/size,-1,1);my=clamp(((_.clientY-rect.top)-(rect.height/2))/size,-1,1)};gx=100;gy=0;gh=10;setInterval(_=>{if(!focus||mapshown)return;n+=0.025;gy-=1;g={x:320+(Math.sin(n)*150),y:200+(Math.cos(n)*150),gy:gy,gx:gx,gh:gh,s:simp};objects.forEach(o=>{if(o.d.onUpdate)o.d.onUpdate(o,g)})},50)</script>